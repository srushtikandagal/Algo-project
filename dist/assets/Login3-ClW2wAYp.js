import{w as H,Y as N,E as M,Z as $,e as w,$ as U,j as e,G as n,a0 as y,J as x,x as l,H as g,T as i,a1 as f,a2 as C,a3 as S,a4 as p,a5 as _,a6 as q,a7 as I,a8 as O,a9 as v,aa as V}from"./index-CJnL4WwT.js";import{u as J,a as Q,G as Y,F as Z,c as K,b as k,d as X,e as ee,C as te,f as ne,A as se,g as re}from"./use-snackbar-DcWQZBLY.js";const oe=({...c})=>{const s=H(),A=N(s.breakpoints.down("md")),E=M(t=>t.customization),j=$(),[P,D]=w.useState(!0),B=U(),{showSnackbar:b,SnackbarComponent:F}=J(),T=Q(t=>ne.post("http://jetalgosoftware.com/api/auth/login",t),{onSuccess:t=>{j({type:v,isUserAuthenticated:!0}),b("Login successful!","success")},onError:t=>{var r;b("Login failed. Please check your credentials.","error"),console.error("Login failed:",((r=t.response)==null?void 0:r.data)||t.message)}}),z=async()=>{j({type:v,isUserAuthenticated:!0}),B("/"),console.log("inside google login handler")},[u,L]=w.useState(!1),R=()=>{L(!u)},W=t=>{t.preventDefault()};return e.jsxs(e.Fragment,{children:[e.jsxs(n,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{children:e.jsxs(x,{disableElevation:!0,fullWidth:!0,onClick:z,size:"large",variant:"outlined",sx:{color:"grey.700",backgroundColor:s.palette.grey[50],borderColor:s.palette.grey[100]},children:[e.jsx(l,{sx:{mr:{xs:1,sm:2,width:20}},children:e.jsx("img",{src:Y,alt:"google",width:16,height:16,style:{marginRight:A?8:16}})}),"Sign in with Google"]})})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(l,{sx:{alignItems:"center",display:"flex"},children:[e.jsx(g,{sx:{flexGrow:1},orientation:"horizontal"}),e.jsx(x,{variant:"outlined",sx:{cursor:"unset",m:2,py:.5,px:7,borderColor:`${s.palette.grey[100]} !important`,color:`${s.palette.grey[900]}!important`,fontWeight:500,borderRadius:`${E.borderRadius}px`},disableRipple:!0,disabled:!0,children:"OR"}),e.jsx(g,{sx:{flexGrow:1},orientation:"horizontal"})]})}),e.jsx(n,{item:!0,xs:12,container:!0,alignItems:"center",justifyContent:"center",children:e.jsx(l,{sx:{mb:2},children:e.jsx(i,{variant:"subtitle1",children:"Sign in with phoneNumber address"})})})]}),e.jsx(Z,{initialValues:{phoneNumber:"",password:"",submit:null},validationSchema:K().shape({phoneNumber:k().required("Phone number is required"),password:k().max(255).required("Password is required")}),onSubmit:(t,{setErrors:r,setStatus:d,setSubmitting:h})=>{T.mutate({mobile:t.phoneNumber,password:t.password},{onError:m=>{var o,a;r({submit:((a=(o=m.response)==null?void 0:o.data)==null?void 0:a.message)||"Something went wrong"}),d({success:!1})},onSettled:()=>{h(!1)}})},children:({errors:t,handleBlur:r,handleChange:d,handleSubmit:h,isSubmitting:m,touched:o,values:a})=>e.jsxs("form",{noValidate:!0,onSubmit:h,...c,children:[e.jsxs(f,{fullWidth:!0,error:!!(o.phoneNumber&&t.phoneNumber),sx:{...s.typography.customInput},children:[e.jsx(C,{htmlFor:"outlined-adornment-phoneNumber-login",children:"phoneNumber Address / Username"}),e.jsx(S,{id:"outlined-adornment-phoneNumber-login",type:"phoneNumber",value:a.phoneNumber,name:"phoneNumber",onBlur:r,onChange:d,label:"phoneNumber Address / Username",inputProps:{}}),o.phoneNumber&&t.phoneNumber&&e.jsx(p,{error:!0,id:"standard-weight-helper-text-phoneNumber-login",children:t.phoneNumber})]}),e.jsxs(f,{fullWidth:!0,error:!!(o.password&&t.password),sx:{...s.typography.customInput},children:[e.jsx(C,{htmlFor:"outlined-adornment-password-login",children:"Password"}),e.jsx(S,{id:"outlined-adornment-password-login",type:u?"text":"password",value:a.password,name:"password",onBlur:r,onChange:d,endAdornment:e.jsx(_,{position:"end",children:e.jsx(q,{"aria-label":"toggle password visibility",onClick:R,onMouseDown:W,edge:"end",size:"large",children:u?e.jsx(X,{}):e.jsx(ee,{})})}),label:"Password",inputProps:{}}),o.password&&t.password&&e.jsx(p,{error:!0,id:"standard-weight-helper-text-password-login",children:t.password})]}),e.jsxs(I,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[e.jsx(O,{control:e.jsx(te,{checked:P,onChange:G=>D(G.target.checked),name:"checked",color:"primary"}),label:"Remember me"}),e.jsx(i,{variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},children:"Forgot Password?"})]}),t.submit&&e.jsx(l,{sx:{mt:3},children:e.jsx(p,{error:!0,children:t.submit})}),e.jsx(l,{sx:{mt:2},children:e.jsx(y,{children:e.jsx(x,{disableElevation:!0,disabled:m,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign in"})})})]})}),e.jsx(F,{})]})},le=()=>{const c=N(s=>s.breakpoints.down("md"));return e.jsx(se,{children:e.jsx(n,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:e.jsx(n,{item:!0,xs:12,children:e.jsx(n,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(n,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(re,{children:e.jsxs(n,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(n,{item:!0,sx:{mb:3},children:e.jsx(i,{color:"secondary.main",gutterBottom:!0,variant:c?"h3":"h2",children:"Algo Trading"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(n,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(n,{item:!0,children:e.jsxs(I,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(i,{color:"secondary.main",gutterBottom:!0,variant:c?"h3":"h2",children:"Hi, Welcome Back"}),e.jsx(i,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your credentials to continue"})]})})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(oe,{})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(g,{})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(n,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:e.jsx(i,{component:V,to:"/pages/register/register3",variant:"subtitle1",sx:{textDecoration:"none"},children:"Don't have an account?"})})})]})})})})})})})};export{le as default};
